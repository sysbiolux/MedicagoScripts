# Scripts provided for the Paper "The intertwined metabolism during symbiotic nitrogen fixation elucidated by metabolic modelling"
By Thomas Pfau, Nils Christian, Shyam K Masakapalli, Lee J. Sweetlove, Mark G. Poolman and Oliver Ebenh√∂h

## The provided scripts require the following tools to be available:

Cobra Toolbox ([Download here](https://github.com/opencobra/cobratoolbox) @ pull 135), the Fastcore algorithm ( [Available here](http://wwwen.uni.lu/recherche/fstc/life_sciences_research_unit/research_areas/systems_biology/software) ) and IBM CPLEX (Academic licenses are available free of charge via the academic initiative). The solver used in the paper was CPLEX v12.6.1.  
**The original implementation of FastCore has to be above the version supplied with COBRA in the Matlab path**.  
If in doubt, run the initSystem() function.


## Matlab Function Descriptions:
All Matlab Scripts are contained in the *Matlab* folder.
The relevant functions to plot the different Figures are:
importMedicago.m - Imports the Medicago truncatula network from the xml file into a MATLAB COBRA structure and adjusts some encodings
BuildTissueModel.m - Builds the Two tissue model. You can supply a previously loaded Model, otherwise it is read from the xml file.
BuildSymbioticModel.m - Build the Symbiotic model and the Non Symbiotic Model wth adjusted Asparagine Biomass fraction. You can provide the TissueModel generated from Build_Tissue_Model to this function. Otherwise it will be generated from the xml.
AmmoniumScan.m - Generates the Ammonium scan plot, if the Tissue Model is not supplied it will be loaded from the xml.
GrowthRateComparison.m - Generate the comparison plot between Growth Rates of the symbiotic and non symbiotic system. You can supply the outputs of the BuildSymbioticModel function, otherwise the respective models will be built from the xml file.
OxWeightScan.m - Generates the plot for the Oxygen scan. You can supply the SymbioticModel generated by BuildSymbioticModel to this function. Otherwise it will be constructed from the xml.  
It is recommended to use importMedicago, BuildTissueModel and BuildSymbioticModel once, since otherwise extensive computations will have to be run every time the plots are generated.

## ScrumPy to Cplex 

The ScrumPy ([available here](http://mudshark.brookes.ac.uk/ScrumPy)) to Cplex interface is provided with the File ScrumPyQP.py in the ScrumPy directory.






